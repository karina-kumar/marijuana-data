{
  "hash": "fbfa0518ff8f4f6bb124981eb54e43ef",
  "result": {
    "markdown": "---\ntitle: \"Plainview City\"\n---\n\n\n## Setup\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.2     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.3     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nlibrary(janitor)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'janitor'\n\nThe following objects are masked from 'package:stats':\n\n    chisq.test, fisher.test\n```\n:::\n\n```{.r .cell-code}\nlibrary(readxl)\nlibrary(lubridate)\n```\n:::\n\n\n## Import \n\nSame process as before\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplainview <- read_excel(\"data-raw/PlainviewCity.xlsx\")\n\nplainview |> glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 468\nColumns: 14\n$ `UCR/NCIC`       <chr> NA, \"35A,3562\", NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n$ `Event Number`   <chr> NA, \"1800524\", \"1800553\", \"1801115\", \"1801116\", \"1801…\n$ name             <chr> NA, \"Indrebo, Chase Kendall\", \"Tonche Enriquez, Emman…\n$ charges          <chr> NA, \"CONTROLLED SUBSTANCE - Marijuana, Possession\", \"…\n$ geox             <chr> NA, \"34.198\", \"34.197000000000003\", \"34.1910000000000…\n$ geoy             <dbl> NA, -101.749, -101.720, -101.723, -101.694, -101.748,…\n$ address_arrest   <chr> NA, \"1601 N I 27\", \"1700 W 15TH\", \"1700 W 11TH\", \"700…\n$ date_arrest      <dttm> NA, 2018-01-07, 2018-01-08, 2018-01-14, 2018-01-14, …\n$ time_arrest      <dttm> NA, 1899-12-31 18:42:00, 1899-12-31 01:14:00, 1899-1…\n$ `Dispatch Dispo` <chr> NA, \"ARR\", \"ARR\", \"ARR\", \"ARR\", \"ARR\", \"ARR\", \"ARR\", …\n$ case_status      <chr> NA, \"CLEARED ADULT ARREST\", \"CLEARED ADULT ARREST\", \"…\n$ age              <dbl> NA, 23, 24, 30, 27, 31, 18, 23, NA, 33, 17, 18, 17, 3…\n$ race             <chr> NA, \"w\", \"h\", \"b\", \"h\", \"w\", \"h\", \"h\", NA, \"h\", \"h\", …\n$ sex              <chr> NA, \"m\", \"m\", \"m\", \"f\", \"f\", \"m\", \"f\", NA, \"f\", \"m\", …\n```\n:::\n:::\n\n\n## Clean\n\nNeed to get rid of extra columns and change date_arrest and time_arrest to datetime_arrest and datetime object. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nplainview_clean <- plainview |> mutate(\n  datetime_arrest = paste(date_arrest,substr(time_arrest,12,19) )\n  ) |> select(\n    -\"UCR/NCIC\", \n    -\"Event Number\", \n    -time_arrest,\n    -\"Dispatch Dispo\",\n    -case_status,\n    -geox,\n    -geoy,\n) |> mutate( datetime_arrest = ymd_hms(datetime_arrest)) |> \n  cbind(agency_arrest = NA, ethnicity = NA)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: There was 1 warning in `mutate()`.\nℹ In argument: `datetime_arrest = ymd_hms(datetime_arrest)`.\nCaused by warning:\n!  1 failed to parse.\n```\n:::\n\n```{.r .cell-code}\nplainview_clean |> glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 468\nColumns: 10\n$ name            <chr> NA, \"Indrebo, Chase Kendall\", \"Tonche Enriquez, Emmanu…\n$ charges         <chr> NA, \"CONTROLLED SUBSTANCE - Marijuana, Possession\", \"C…\n$ address_arrest  <chr> NA, \"1601 N I 27\", \"1700 W 15TH\", \"1700 W 11TH\", \"700 …\n$ date_arrest     <dttm> NA, 2018-01-07, 2018-01-08, 2018-01-14, 2018-01-14, 2…\n$ age             <dbl> NA, 23, 24, 30, 27, 31, 18, 23, NA, 33, 17, 18, 17, 31…\n$ race            <chr> NA, \"w\", \"h\", \"b\", \"h\", \"w\", \"h\", \"h\", NA, \"h\", \"h\", \"…\n$ sex             <chr> NA, \"m\", \"m\", \"m\", \"f\", \"f\", \"m\", \"f\", NA, \"f\", \"m\", \"…\n$ datetime_arrest <dttm> NA, 2018-01-07 18:42:00, 2018-01-08 01:14:00, 2018-01…\n$ agency_arrest   <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n$ ethnicity       <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n```\n:::\n:::\n\n\n## Export\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplainview_clean |> write_csv(\"data-processed/Plainview-City.csv\")\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}